<html>
	<head>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

		<script src="/js/seqwww.js"></script>
		<script src="/js/knob.js"></script>
		<script type="text/javascript">
			(function() {
			 var config = {
				kitId: 'zoz0eob',
				scriptTimeout: 3000
				};
				var h=document.getElementsByTagName("html")[0];h.className+=" wf-loading";var t=setTimeout(function(){h.className=h.className.replace(/(\s|^)wf-loading(\s|$)/g," ");h.className+=" wf-inactive"},config.scriptTimeout);var tk=document.createElement("script"),d=false;tk.src='//use.typekit.net/'+config.kitId+'.js';tk.type="text/javascript";tk.async="true";tk.onload=tk.onreadystatechange=function(){var a=this.readyState;if(d||a&&a!="complete"&&a!="loaded")return;d=true;clearTimeout(t);try{Typekit.load(config)}catch(b){}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(tk,s)
				})();
		</script>
		<link rel="stylesheet" type="text/css" href="/css/seqwww.css">
		<script>
			$(document).ready(function() {
				try {
					window.AudioContext = window.AudioContext || window.webkitAudioContext;
					var context = new AudioContext();

					engine = new Engine(context);

					engine.SetupUI();

					sequence = [
					{ what: DrumSound.BD, when: 1 },
					{ what: DrumSound.CH, when: 1 },
					{ what: DrumSound.CH, when: 2 },
					{ what: DrumSound.CH, when: 3 },
					{ what: DrumSound.CH, when: 4 },
					{ what: DrumSound.SD, when: 5 },
					{ what: DrumSound.CH, when: 6 },
					{ what: DrumSound.CH, when: 7 },
					{ what: DrumSound.CH, when: 8 },
					{ what: DrumSound.BD, when: 9 },
					{ what: DrumSound.CH, when: 9 },
					{ what: DrumSound.CH, when: 10 },
					{ what: DrumSound.CH, when: 11 },
					{ what: DrumSound.CH, when: 12 },
					{ what: DrumSound.SD, when: 13 },
					{ what: DrumSound.CH, when: 14 },
					{ what: DrumSound.CH, when: 15 },
					{ what: DrumSound.CH, when: 16 },
					];

					polySequence = [
					{ what: "D#", when: 1 },
					{ what: "C", when: 1 },
					{ what: "G#", when: 1 },
					{ what: "D#", when: 9 },
					{ what: "C", when: 9 },
					{ what: "G", when: 9 },
					{ what: "D#", when: 13 },
					{ what: "A#", when: 13 },
					{ what: "G", when: 13 },
					];

					engine.DrumMachine.LoadSequence(sequence);
					engine.Poly.LoadSequence(polySequence);

					engine.LoadSequence(130);
				}
				catch(e) {
					document.write("<h2>Sorry, web audio is not supported by this browser</h2>");
					console.log(e.toString());
				}
			});
		</script>
	</head>

	<body>
		<div id="transport">
			<span id="sequencer-start">PLAY</span>
			<span id="sequencer-stop">STOP</span>
		</div>
		<div id="instruments">
			<div id="drummachine">
				<div id="drummachine-controls">
					<span id="drummachine-controls-bd-decay"><input type="text"></span>
				</div>
				<div class="drummachine-lane" id="drummachine-sequencer-oh">
					<span class="drummachine-sequencer-label">OH</span> 
				</div>
				<div class="drummachine-lane" id="drummachine-sequencer-ch">
					<span class="drummachine-sequencer-label">CH</span> 
				</div>
				<div class="drummachine-lane" id="drummachine-sequencer-sd">
					<span class="drummachine-sequencer-label">SD</span> 
				</div>

				<div class="drummachine-lane" id="drummachine-sequencer-bd">
					<span class="drummachine-sequencer-label">BD</span> 
				</div>

			</div>
			<div id="poly">
				<div id="poly-controls">
					<div class="hcontrol"><label><input id="poly-env-attack" type="text">attack</label></div>
					<div class="hcontrol"><label><input id="poly-env-decay" type="text">decay</label></div>
					<div class="hcontrol"><label><input id="poly-env-sustain" type="text">sustain</label></div>
					<div class="hcontrol"><label><input id="poly-env-release" type="text">release</label></div>

					<div class="hcontrol"><label><input id="poly-filter-freq" type="text">cutoff</label></div>
					<div class="hcontrol"><label><input id="poly-filter-q" type="text">resonance</label></div>
				</div>
				<div id="poly-sequencer">
					<div class="poly-sequencer-lane" id="poly-lane-e2">
						<span class="poly-sequencer-label">E&nbsp;</span>
					</div>
					<div class="poly-sequencer-lane" id="poly-lane-ds">
						<span class="poly-sequencer-label">D#</span>
					</div>
					<div class="poly-sequencer-lane" id="poly-lane-d">
						<span class="poly-sequencer-label">D&nbsp;</span>
					</div>
					<div class="poly-sequencer-lane" id="poly-lane-cs">
						<span class="poly-sequencer-label">C#</span>
					</div>
					<div class="poly-sequencer-lane" id="poly-lane-c">
						<span class="poly-sequencer-label">C&nbsp;</span>
					</div>
					<div class="poly-sequencer-lane" id="poly-lane-b">
						<span class="poly-sequencer-label">B&nbsp;</span>
					</div>
					<div class="poly-sequencer-lane" id="poly-lane-as">
						<span class="poly-sequencer-label">A#</span>
					</div>
					<div class="poly-sequencer-lane" id="poly-lane-a">
						<span class="poly-sequencer-label">A&nbsp;</span>
					</div>
					<div class="poly-sequencer-lane" id="poly-lane-gs">
						<span class="poly-sequencer-label">G#</span>
					</div>
					<div class="poly-sequencer-lane" id="poly-lane-g">
						<span class="poly-sequencer-label">G&nbsp;</span>
					</div>
					<div class="poly-sequencer-lane" id="poly-lane-fs">
						<span class="poly-sequencer-label">F#</span>
					</div>
					<div class="poly-sequencer-lane" id="poly-lane-f">
						<span class="poly-sequencer-label">F&nbsp;</span>
					</div>
					<div class="poly-sequencer-lane" id="poly-lane-e">
						<span class="poly-sequencer-label">E&nbsp;</span>
					</div>
				</div>
			</div>
		</div>
		<div id="master">
			<div>
				<span id="master-eq-low"><input type="text"></span>
				<span id="master-eq-mid"><input type="text"></span>
				<span id="master-eq-high"><input type="text"></span>
				<span id="master-gain"><input type="text"></span>
			</div>
			<div>
				<span id="master-comp-threshold"><input type="text"></span>
				<span id="master-comp-ratio"><input type="text"></span>
				<span id="master-comp-attack"><input type="text"></span>
				<span id="master-comp-release"><input type="text"></span>
				<span id="master-dist-amount"><input type="text"></span>
			</div>
			<div>
				<td id="master-delay">delay</td>
				<td id="master-reverb">reverb</td>
			</div>
		</div>
	</body>
</html>
